import"./hoisted.DfmkDC1Y.js";import"./index.Bk1SgUwd.js";(()=>{const m="cardgallery-layout-mode",f=new WeakSet,y=(t,a)=>{t.forEach(r=>{const s=r.dataset.mode===a;r.classList.toggle("is-active",s),r.setAttribute("aria-pressed",s?"true":"false")})},l=(t,a)=>a&&a.id===t&&document.body.contains(a)?a:document.getElementById(t),p=t=>{if(!(t instanceof HTMLElement)||f.has(t))return;const a=t.dataset.target??"",r=t.dataset.default??"classic",s=Array.from(t.querySelectorAll("[data-mode]")).filter(e=>e instanceof HTMLButtonElement);if(!a||s.length===0)return;const g=new Set(s.map(e=>e.dataset.mode).filter(e=>typeof e=="string"&&e.length>0));let n=l(a,null),i=null;const c=e=>{const o=typeof e=="string"&&g.has(e)?e:r;if(y(s,o),i=o,n=l(a,n),!!n){i=null,n.dataset.layoutMode!==o&&(n.dataset.layoutMode=o);try{localStorage.setItem(m,o)}catch{}}};let u=r;try{const e=localStorage.getItem(m);e&&g.has(e)&&(u=e)}catch{}if(s.forEach(e=>{e.addEventListener("click",o=>{o.preventDefault(),c(e.dataset.mode)})}),!n){const e=new MutationObserver(()=>{n=l(a,n),n&&(e.disconnect(),c(i||u))});e.observe(document.documentElement,{childList:!0,subtree:!0})}c(u),f.add(t)},d=()=>{document.querySelectorAll("[data-layout-toggle]").forEach(t=>{t instanceof HTMLElement&&p(t)})};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",d,{once:!0}):d(),document.addEventListener("astro:page-load",d),document.addEventListener("astro:after-swap",d)})();
