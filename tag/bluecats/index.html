<!DOCTYPE html><html lang="en" class="scroll-smooth"> <head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><title>bluecats • amarantha&#39;s postcards</title><meta name="description" content="Tag bluecats on amarantha's postcards"><!-- Open Graph / Twitter meta --><meta property="og:title" content="bluecats • amarantha's postcards"><meta property="og:description" content="Tag bluecats on amarantha's postcards"><meta property="og:image" content="/cardgallery/og/home.png"><meta property="og:type" content="website"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:title" content="bluecats • amarantha's postcards"><meta name="twitter:description" content="Tag bluecats on amarantha's postcards"><meta name="twitter:image" content="/cardgallery/og/home.png"><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;500;600;700&family=Work+Sans:wght@400;500;600;700&display=swap"><link rel="icon" type="image/png" href="/cardgallery/assets/img/amarantha-logo.png"><link rel="icon" type="image/svg+xml" href="/cardgallery/assets/img/amarantha-logo.svg"><link rel="stylesheet" href="/cardgallery/_astro/_album_.CCZ0lAgh.css">
<link rel="stylesheet" href="/cardgallery/_astro/_album_.V3tSAFWn.css"><script type="module">(()=>{const f="cardgallery-layout-mode",g=new WeakSet,y=(t,a)=>{t.forEach(r=>{const s=r.dataset.mode===a;r.classList.toggle("is-active",s),r.setAttribute("aria-pressed",s?"true":"false")})},l=(t,a)=>a&&a.id===t&&document.body.contains(a)?a:document.getElementById(t),p=t=>{if(!(t instanceof HTMLElement)||g.has(t))return;const a=t.dataset.target??"",r=t.dataset.default??"classic",s=Array.from(t.querySelectorAll("[data-mode]")).filter(e=>e instanceof HTMLButtonElement);if(!a||s.length===0)return;const m=new Set(s.map(e=>e.dataset.mode).filter(e=>typeof e=="string"&&e.length>0));let n=l(a,null),c=null;const i=e=>{const o=typeof e=="string"&&m.has(e)?e:r;if(y(s,o),c=o,n=l(a,n),!!n){c=null,n.dataset.layoutMode!==o&&(n.dataset.layoutMode=o);try{localStorage.setItem(f,o)}catch{}}};let u=r;try{const e=localStorage.getItem(f);e&&m.has(e)&&(u=e)}catch{}if(s.forEach(e=>{e.addEventListener("click",o=>{o.preventDefault(),i(e.dataset.mode)})}),!n){const e=new MutationObserver(()=>{n=l(a,n),n&&(e.disconnect(),i(c||u))});e.observe(document.documentElement,{childList:!0,subtree:!0})}i(u),g.add(t)},d=()=>{document.querySelectorAll("[data-layout-toggle]").forEach(t=>{t instanceof HTMLElement&&p(t)})};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",d,{once:!0}):d(),document.addEventListener("astro:page-load",d),document.addEventListener("astro:after-swap",d)})();
</script></head> <body class="bg-linen text-primary "> <div class="min-h-screen flex flex-col"> <div class="flex-1">  <div class="flex min-h-screen flex-col lg:flex-row"> <aside class="hidden bg-sidebar border-r border-sidebar px-6 py-7 w-72 flex-col gap-6 lg:flex"> <div class="mx-auto h-28 w-28 overflow-hidden rounded-full border-4 border-avatar shadow-surface"> <img src="/cardgallery/assets/img/amarantha-avatar.jpg" alt="Portrait of amarantha with her dog" class="h-full w-full object-cover"> </div> <nav class="flex flex-col gap-6"> <div> <p class="text-xs uppercase tracking-[0.2em] text-muted mb-3">Browse</p> <ul class="flex flex-col gap-2"> <li> <a class="flex items-center gap-2 rounded-md px-4 py-3 text-base font-semibold transition hover:bg-sidebar-hover " href="/cardgallery/"> <span>All folders</span> </a> </li> <li> <a class="flex items-center gap-2 rounded-sm px-3 py-2 text-sm font-semibold transition hover:bg-sidebar-hover " href="/cardgallery/album/ad-and-free"> <span>Ad And Free</span> <span class="ml-auto text-xs font-medium text-muted">30</span> </a> </li><li> <a class="flex items-center gap-2 rounded-sm px-3 py-2 text-sm font-semibold transition hover:bg-sidebar-hover " href="/cardgallery/album/architecture"> <span>Architecture</span> <span class="ml-auto text-xs font-medium text-muted">14</span> </a> </li><li> <a class="flex items-center gap-2 rounded-sm px-3 py-2 text-sm font-semibold transition hover:bg-sidebar-hover " href="/cardgallery/album/art"> <span>Art</span> <span class="ml-auto text-xs font-medium text-muted">109</span> </a> </li><li> <a class="flex items-center gap-2 rounded-sm px-3 py-2 text-sm font-semibold transition hover:bg-sidebar-hover " href="/cardgallery/album/cats-and-blue-cats"> <span>Cats And Blue Cats</span> <span class="ml-auto text-xs font-medium text-muted">24</span> </a> </li><li> <a class="flex items-center gap-2 rounded-sm px-3 py-2 text-sm font-semibold transition hover:bg-sidebar-hover " href="/cardgallery/album/food-and-recipes"> <span>Food And Recipes</span> <span class="ml-auto text-xs font-medium text-muted">22</span> </a> </li><li> <a class="flex items-center gap-2 rounded-sm px-3 py-2 text-sm font-semibold transition hover:bg-sidebar-hover " href="/cardgallery/album/lighthouses"> <span>Lighthouses</span> <span class="ml-auto text-xs font-medium text-muted">6</span> </a> </li><li> <a class="flex items-center gap-2 rounded-sm px-3 py-2 text-sm font-semibold transition hover:bg-sidebar-hover " href="/cardgallery/album/main-album"> <span>Main Folder</span> <span class="ml-auto text-xs font-medium text-muted">68</span> </a> </li><li> <a class="flex items-center gap-2 rounded-sm px-3 py-2 text-sm font-semibold transition hover:bg-sidebar-hover " href="/cardgallery/album/meet-up-cards"> <span>Meet Up Cards</span> <span class="ml-auto text-xs font-medium text-muted">6</span> </a> </li><li> <a class="flex items-center gap-2 rounded-sm px-3 py-2 text-sm font-semibold transition hover:bg-sidebar-hover " href="/cardgallery/album/not-my-country"> <span>Not My Country</span> <span class="ml-auto text-xs font-medium text-muted">15</span> </a> </li><li> <a class="flex items-center gap-2 rounded-sm px-3 py-2 text-sm font-semibold transition hover:bg-sidebar-hover " href="/cardgallery/album/russia"> <span>Russia</span> <span class="ml-auto text-xs font-medium text-muted">93</span> </a> </li><li> <a class="flex items-center gap-2 rounded-sm px-3 py-2 text-sm font-semibold transition hover:bg-sidebar-hover " href="/cardgallery/album/soviet-reprints"> <span>Soviet Reprints</span> <span class="ml-auto text-xs font-medium text-muted">21</span> </a> </li><li> <a class="flex items-center gap-2 rounded-sm px-3 py-2 text-sm font-semibold transition hover:bg-sidebar-hover " href="/cardgallery/album/soviet-vintage"> <span>Soviet Vintage</span> <span class="ml-auto text-xs font-medium text-muted">15</span> </a> </li><li> <a class="flex items-center gap-2 rounded-sm px-3 py-2 text-sm font-semibold transition hover:bg-sidebar-hover " href="/cardgallery/album/transportation"> <span>Transportation</span> <span class="ml-auto text-xs font-medium text-muted">17</span> </a> </li><li> <a class="flex items-center gap-2 rounded-sm px-3 py-2 text-sm font-semibold transition hover:bg-sidebar-hover " href="/cardgallery/album/travel-posters"> <span>Travel Posters</span> <span class="ml-auto text-xs font-medium text-muted">9</span> </a> </li><li> <a class="flex items-center gap-2 rounded-sm px-3 py-2 text-sm font-semibold transition hover:bg-sidebar-hover " href="/cardgallery/album/tretyakov-gallery-vintage"> <span>Tretyakov Gallery (Vintage)</span> <span class="ml-auto text-xs font-medium text-muted">35</span> </a> </li> </ul> </div> <div> <p class="text-xs uppercase tracking-[0.2em] text-muted mb-3">Tags</p> <ul class="flex flex-col gap-2">  <li> <a class="block rounded-sm px-3 py-2 text-sm font-medium transition hover:bg-sidebar-hover border border-transparent" href="/cardgallery/tag/birds"> Birds </a> </li><li> <a class="block rounded-sm px-3 py-2 text-sm font-medium transition hover:bg-sidebar-hover bg-sidebar-tag border border-sidebar-strong text-accent" href="/cardgallery/tag/bluecats"> bluecats </a> </li><li> <a class="block rounded-sm px-3 py-2 text-sm font-medium transition hover:bg-sidebar-hover border border-transparent" href="/cardgallery/tag/boomerang"> Boomerang </a> </li><li> <a class="block rounded-sm px-3 py-2 text-sm font-medium transition hover:bg-sidebar-hover border border-transparent" href="/cardgallery/tag/dutch-style"> Dutch-style </a> </li><li> <a class="block rounded-sm px-3 py-2 text-sm font-medium transition hover:bg-sidebar-hover border border-transparent" href="/cardgallery/tag/free"> Free </a> </li><li> <a class="block rounded-sm px-3 py-2 text-sm font-medium transition hover:bg-sidebar-hover border border-transparent" href="/cardgallery/tag/illustration"> illustration </a> </li><li> <a class="block rounded-sm px-3 py-2 text-sm font-medium transition hover:bg-sidebar-hover border border-transparent" href="/cardgallery/tag/meetup"> Meetup </a> </li><li> <a class="block rounded-sm px-3 py-2 text-sm font-medium transition hover:bg-sidebar-hover border border-transparent" href="/cardgallery/tag/museum"> Museum </a> </li> </ul> </div> </nav> </aside> <main class="flex flex-1 flex-col overflow-hidden"> <section class="flex flex-col gap-6 border-b border-hero-border bg-gradient-to-br from-hero-from to-hero-to px-6 py-8 md:flex-row md:items-center md:justify-between md:gap-12 md:px-9"> <div class="flex max-w-3xl flex-col gap-3"> <h1 class="text-3xl font-bold text-accent md:text-4xl">amarantha&#39;s postcards for swap</h1> <p class="text-base text-muted md:text-lg">collected with love, shared with joy</p> </div> <div class="h-28 w-28 opacity-95 md:h-32 md:w-32"> <img src="/cardgallery/assets/img/amarantha-logo.png" alt="amarantha wordmark" class="h-full w-full object-contain"> </div> </section> <header class="flex flex-col gap-4 border-b border-profile bg-gradient-to-b from-white/95 to-gradient-warm-soft px-6 py-6 md:flex-row md:items-end md:justify-between md:px-9"> <div class="flex flex-col gap-3"> <a class="inline-flex items-center gap-2 text-sm font-semibold text-accent transition hover:-translate-x-0.5" href="/cardgallery/"> <span aria-hidden="true">←</span> <span>Back to all folders</span> </a> <div> <h2 class="text-2xl font-bold">bluecats</h2> <p class="mt-2 text-sm text-muted">15 postcards</p> </div> </div>  </header> <div class="flex justify-end px-6 pt-2 md:px-9"> <div class="layout-toggle" data-layout-toggle data-target="tag-grid-bluecats" data-default="classic" data-astro-cid-3vn7qhwr> <button type="button" class="layout-toggle__button" data-mode="classic" aria-pressed="false" data-astro-cid-3vn7qhwr> <span class="layout-toggle__icon" aria-hidden="true" data-astro-cid-3vn7qhwr> <svg width="28" height="22" viewBox="0 0 28 22" fill="none" xmlns="http://www.w3.org/2000/svg" data-astro-cid-3vn7qhwr> <rect x="1" y="1" width="9" height="8" rx="2" fill="currentColor" data-astro-cid-3vn7qhwr></rect> <rect x="12" y="1" width="7" height="3.5" rx="1.5" fill="currentColor" data-astro-cid-3vn7qhwr></rect> <rect x="21" y="1" width="6" height="5.5" rx="1.5" fill="currentColor" data-astro-cid-3vn7qhwr></rect> <rect x="12" y="6" width="6.5" height="3" rx="1.5" fill="currentColor" data-astro-cid-3vn7qhwr></rect> <rect x="1" y="12" width="6" height="8" rx="2" fill="currentColor" data-astro-cid-3vn7qhwr></rect> <rect x="9" y="12" width="9" height="8" rx="2" fill="currentColor" data-astro-cid-3vn7qhwr></rect> <rect x="20" y="12" width="7" height="8" rx="2" fill="currentColor" data-astro-cid-3vn7qhwr></rect> </svg> </span> <span class="layout-toggle__sr-only" data-astro-cid-3vn7qhwr>Classic layout</span> </button><button type="button" class="layout-toggle__button" data-mode="big-mobile" aria-pressed="false" data-astro-cid-3vn7qhwr> <span class="layout-toggle__icon" aria-hidden="true" data-astro-cid-3vn7qhwr> <svg width="28" height="22" viewBox="0 0 28 22" fill="none" xmlns="http://www.w3.org/2000/svg" data-astro-cid-3vn7qhwr> <rect x="1" y="1" width="16" height="9" rx="2" fill="currentColor" data-astro-cid-3vn7qhwr></rect> <rect x="19" y="1" width="8" height="9" rx="2" fill="currentColor" data-astro-cid-3vn7qhwr></rect> <rect x="1" y="12" width="11" height="9" rx="2" fill="currentColor" data-astro-cid-3vn7qhwr></rect> <rect x="14" y="12" width="13" height="9" rx="2" fill="currentColor" data-astro-cid-3vn7qhwr></rect> </svg> </span> <span class="layout-toggle__sr-only" data-astro-cid-3vn7qhwr>Big mobile layout</span> </button> </div>   </div> <section id="tag-grid-bluecats" class="section-shell" data-tone="ink" data-lightbox-root data-lightbox-base="/cardgallery/" data-lightbox-items="%5B%7B%22preview%22%3A%22https%3A%2F%2Fres.cloudinary.com%2Fdd33tfitz%2Fimage%2Fupload%2Ff_auto%2Fq_auto%2Fc_limit%2Cw_1200%2F783257336.905772_nfjzgw%3F_a%3DDATAiZeAZAA0%22%2C%22grid%22%3A%22https%3A%2F%2Fres.cloudinary.com%2Fdd33tfitz%2Fimage%2Fupload%2Ff_auto%2Fq_auto%2Fc_limit%2Cw_720%2F783257336.905772_nfjzgw%3F_a%3DDATAiZeAZAA0%22%2C%22thumb%22%3A%22https%3A%2F%2Fres.cloudinary.com%2Fdd33tfitz%2Fimage%2Fupload%2Ff_auto%2Fq_auto%2Fc_fill%2Cg_auto%2Ch_360%2Cw_480%2F783257336.905772_nfjzgw%3F_a%3DDATAiZeAZAA0%22%2C%22title%22%3A%22783257336.905772%20Nfjzgw%22%2C%22description%22%3A%22%22%2C%22name%22%3A%22%22%2C%22author%22%3A%22%22%2C%22desc%22%3A%22%22%2C%22tags%22%3A%5B%7B%22code%22%3A%22bluecats%22%2C%22slug%22%3A%22bluecats%22%2C%22label%22%3A%22bluecats%22%7D%5D%2C%22width%22%3A3500%2C%22height%22%3A2333%2C%22aspectRatio%22%3A1.50021%7D%2C%7B%22preview%22%3A%22https%3A%2F%2Fres.cloudinary.com%2Fdd33tfitz%2Fimage%2Fupload%2Ff_auto%2Fq_auto%2Fc_limit%2Cw_1200%2F783257331.845473_xvi5ss%3F_a%3DDATAiZeAZAA0%22%2C%22grid%22%3A%22https%3A%2F%2Fres.cloudinary.com%2Fdd33tfitz%2Fimage%2Fupload%2Ff_auto%2Fq_auto%2Fc_limit%2Cw_720%2F783257331.845473_xvi5ss%3F_a%3DDATAiZeAZAA0%22%2C%22thumb%22%3A%22https%3A%2F%2Fres.cloudinary.com%2Fdd33tfitz%2Fimage%2Fupload%2Ff_auto%2Fq_auto%2Fc_fill%2Cg_auto%2Ch_360%2Cw_480%2F783257331.845473_xvi5ss%3F_a%3DDATAiZeAZAA0%22%2C%22title%22%3A%22783257331.845473%20Xvi5ss%22%2C%22description%22%3A%22%22%2C%22name%22%3A%22%22%2C%22author%22%3A%22%22%2C%22desc%22%3A%22%22%2C%22tags%22%3A%5B%7B%22code%22%3A%22bluecats%22%2C%22slug%22%3A%22bluecats%22%2C%22label%22%3A%22bluecats%22%7D%5D%2C%22width%22%3A3500%2C%22height%22%3A2333%2C%22aspectRatio%22%3A1.50021%7D%2C%7B%22preview%22%3A%22https%3A%2F%2Fres.cloudinary.com%2Fdd33tfitz%2Fimage%2Fupload%2Ff_auto%2Fq_auto%2Fc_limit%2Cw_1200%2F783257326.666086_rmdzdu%3F_a%3DDATAiZeAZAA0%22%2C%22grid%22%3A%22https%3A%2F%2Fres.cloudinary.com%2Fdd33tfitz%2Fimage%2Fupload%2Ff_auto%2Fq_auto%2Fc_limit%2Cw_720%2F783257326.666086_rmdzdu%3F_a%3DDATAiZeAZAA0%22%2C%22thumb%22%3A%22https%3A%2F%2Fres.cloudinary.com%2Fdd33tfitz%2Fimage%2Fupload%2Ff_auto%2Fq_auto%2Fc_fill%2Cg_auto%2Ch_360%2Cw_480%2F783257326.666086_rmdzdu%3F_a%3DDATAiZeAZAA0%22%2C%22title%22%3A%22783257326.666086%20Rmdzdu%22%2C%22description%22%3A%22%22%2C%22name%22%3A%22%22%2C%22author%22%3A%22%22%2C%22desc%22%3A%22%22%2C%22tags%22%3A%5B%7B%22code%22%3A%22bluecats%22%2C%22slug%22%3A%22bluecats%22%2C%22label%22%3A%22bluecats%22%7D%5D%2C%22width%22%3A3500%2C%22height%22%3A2333%2C%22aspectRatio%22%3A1.50021%7D%2C%7B%22preview%22%3A%22https%3A%2F%2Fres.cloudinary.com%2Fdd33tfitz%2Fimage%2Fupload%2Ff_auto%2Fq_auto%2Fc_limit%2Cw_1200%2F555551884_rgcefa%3F_a%3DDATAiZeAZAA0%22%2C%22grid%22%3A%22https%3A%2F%2Fres.cloudinary.com%2Fdd33tfitz%2Fimage%2Fupload%2Ff_auto%2Fq_auto%2Fc_limit%2Cw_720%2F555551884_rgcefa%3F_a%3DDATAiZeAZAA0%22%2C%22thumb%22%3A%22https%3A%2F%2Fres.cloudinary.com%2Fdd33tfitz%2Fimage%2Fupload%2Ff_auto%2Fq_auto%2Fc_fill%2Cg_auto%2Ch_360%2Cw_480%2F555551884_rgcefa%3F_a%3DDATAiZeAZAA0%22%2C%22title%22%3A%22555551884%20Rgcefa%22%2C%22description%22%3A%22%22%2C%22name%22%3A%22%22%2C%22author%22%3A%22%22%2C%22desc%22%3A%22%22%2C%22tags%22%3A%5B%7B%22code%22%3A%22illustration%22%2C%22slug%22%3A%22illustration%22%2C%22label%22%3A%22illustration%22%7D%2C%7B%22code%22%3A%22bluecats%22%2C%22slug%22%3A%22bluecats%22%2C%22label%22%3A%22bluecats%22%7D%5D%2C%22width%22%3A2333%2C%22height%22%3A3500%2C%22aspectRatio%22%3A0.66657%7D%2C%7B%22preview%22%3A%22https%3A%2F%2Fres.cloudinary.com%2Fdd33tfitz%2Fimage%2Fupload%2Ff_auto%2Fq_auto%2Fc_limit%2Cw_1200%2F555551874_xn8plz%3F_a%3DDATAiZeAZAA0%22%2C%22grid%22%3A%22https%3A%2F%2Fres.cloudinary.com%2Fdd33tfitz%2Fimage%2Fupload%2Ff_auto%2Fq_auto%2Fc_limit%2Cw_720%2F555551874_xn8plz%3F_a%3DDATAiZeAZAA0%22%2C%22thumb%22%3A%22https%3A%2F%2Fres.cloudinary.com%2Fdd33tfitz%2Fimage%2Fupload%2Ff_auto%2Fq_auto%2Fc_fill%2Cg_auto%2Ch_360%2Cw_480%2F555551874_xn8plz%3F_a%3DDATAiZeAZAA0%22%2C%22title%22%3A%22555551874%20Xn8plz%22%2C%22description%22%3A%22%22%2C%22name%22%3A%22%22%2C%22author%22%3A%22%22%2C%22desc%22%3A%22%22%2C%22tags%22%3A%5B%7B%22code%22%3A%22illustration%22%2C%22slug%22%3A%22illustration%22%2C%22label%22%3A%22illustration%22%7D%2C%7B%22code%22%3A%22bluecats%22%2C%22slug%22%3A%22bluecats%22%2C%22label%22%3A%22bluecats%22%7D%5D%2C%22width%22%3A3500%2C%22height%22%3A2333%2C%22aspectRatio%22%3A1.50021%7D%2C%7B%22preview%22%3A%22https%3A%2F%2Fres.cloudinary.com%2Fdd33tfitz%2Fimage%2Fupload%2Ff_auto%2Fq_auto%2Fc_limit%2Cw_1200%2F783257321.732976_goo4ry%3F_a%3DDATAiZeAZAA0%22%2C%22grid%22%3A%22https%3A%2F%2Fres.cloudinary.com%2Fdd33tfitz%2Fimage%2Fupload%2Ff_auto%2Fq_auto%2Fc_limit%2Cw_720%2F783257321.732976_goo4ry%3F_a%3DDATAiZeAZAA0%22%2C%22thumb%22%3A%22https%3A%2F%2Fres.cloudinary.com%2Fdd33tfitz%2Fimage%2Fupload%2Ff_auto%2Fq_auto%2Fc_fill%2Cg_auto%2Ch_360%2Cw_480%2F783257321.732976_goo4ry%3F_a%3DDATAiZeAZAA0%22%2C%22title%22%3A%22783257321.732976%20Goo4ry%22%2C%22description%22%3A%22%22%2C%22name%22%3A%22%22%2C%22author%22%3A%22%22%2C%22desc%22%3A%22%22%2C%22tags%22%3A%5B%7B%22code%22%3A%22bluecats%22%2C%22slug%22%3A%22bluecats%22%2C%22label%22%3A%22bluecats%22%7D%2C%7B%22code%22%3A%22illustration%22%2C%22slug%22%3A%22illustration%22%2C%22label%22%3A%22illustration%22%7D%5D%2C%22width%22%3A2333%2C%22height%22%3A3500%2C%22aspectRatio%22%3A0.66657%7D%2C%7B%22preview%22%3A%22https%3A%2F%2Fres.cloudinary.com%2Fdd33tfitz%2Fimage%2Fupload%2Ff_auto%2Fq_auto%2Fc_limit%2Cw_1200%2F783257286.113502_bx4nlb%3F_a%3DDATAiZeAZAA0%22%2C%22grid%22%3A%22https%3A%2F%2Fres.cloudinary.com%2Fdd33tfitz%2Fimage%2Fupload%2Ff_auto%2Fq_auto%2Fc_limit%2Cw_720%2F783257286.113502_bx4nlb%3F_a%3DDATAiZeAZAA0%22%2C%22thumb%22%3A%22https%3A%2F%2Fres.cloudinary.com%2Fdd33tfitz%2Fimage%2Fupload%2Ff_auto%2Fq_auto%2Fc_fill%2Cg_auto%2Ch_360%2Cw_480%2F783257286.113502_bx4nlb%3F_a%3DDATAiZeAZAA0%22%2C%22title%22%3A%22783257286.113502%20Bx4nlb%22%2C%22description%22%3A%22%22%2C%22name%22%3A%22%22%2C%22author%22%3A%22%22%2C%22desc%22%3A%22%22%2C%22tags%22%3A%5B%7B%22code%22%3A%22bluecats%22%2C%22slug%22%3A%22bluecats%22%2C%22label%22%3A%22bluecats%22%7D%2C%7B%22code%22%3A%22illustration%22%2C%22slug%22%3A%22illustration%22%2C%22label%22%3A%22illustration%22%7D%5D%2C%22width%22%3A2333%2C%22height%22%3A3500%2C%22aspectRatio%22%3A0.66657%7D%2C%7B%22preview%22%3A%22https%3A%2F%2Fres.cloudinary.com%2Fdd33tfitz%2Fimage%2Fupload%2Ff_auto%2Fq_auto%2Fc_limit%2Cw_1200%2F783257301.940281_x0gqpx%3F_a%3DDATAiZeAZAA0%22%2C%22grid%22%3A%22https%3A%2F%2Fres.cloudinary.com%2Fdd33tfitz%2Fimage%2Fupload%2Ff_auto%2Fq_auto%2Fc_limit%2Cw_720%2F783257301.940281_x0gqpx%3F_a%3DDATAiZeAZAA0%22%2C%22thumb%22%3A%22https%3A%2F%2Fres.cloudinary.com%2Fdd33tfitz%2Fimage%2Fupload%2Ff_auto%2Fq_auto%2Fc_fill%2Cg_auto%2Ch_360%2Cw_480%2F783257301.940281_x0gqpx%3F_a%3DDATAiZeAZAA0%22%2C%22title%22%3A%22783257301.940281%20X0gqpx%22%2C%22description%22%3A%22%22%2C%22name%22%3A%22%22%2C%22author%22%3A%22%22%2C%22desc%22%3A%22%22%2C%22tags%22%3A%5B%7B%22code%22%3A%22bluecats%22%2C%22slug%22%3A%22bluecats%22%2C%22label%22%3A%22bluecats%22%7D%2C%7B%22code%22%3A%22illustration%22%2C%22slug%22%3A%22illustration%22%2C%22label%22%3A%22illustration%22%7D%5D%2C%22width%22%3A3500%2C%22height%22%3A2211%2C%22aspectRatio%22%3A1.58299%7D%2C%7B%22preview%22%3A%22https%3A%2F%2Fres.cloudinary.com%2Fdd33tfitz%2Fimage%2Fupload%2Ff_auto%2Fq_auto%2Fc_limit%2Cw_1200%2F783257241.065066_geflek%3F_a%3DDATAiZeAZAA0%22%2C%22grid%22%3A%22https%3A%2F%2Fres.cloudinary.com%2Fdd33tfitz%2Fimage%2Fupload%2Ff_auto%2Fq_auto%2Fc_limit%2Cw_720%2F783257241.065066_geflek%3F_a%3DDATAiZeAZAA0%22%2C%22thumb%22%3A%22https%3A%2F%2Fres.cloudinary.com%2Fdd33tfitz%2Fimage%2Fupload%2Ff_auto%2Fq_auto%2Fc_fill%2Cg_auto%2Ch_360%2Cw_480%2F783257241.065066_geflek%3F_a%3DDATAiZeAZAA0%22%2C%22title%22%3A%22783257241.065066%20Geflek%22%2C%22description%22%3A%22%22%2C%22name%22%3A%22%22%2C%22author%22%3A%22%22%2C%22desc%22%3A%22%22%2C%22tags%22%3A%5B%7B%22code%22%3A%22bluecats%22%2C%22slug%22%3A%22bluecats%22%2C%22label%22%3A%22bluecats%22%7D%2C%7B%22code%22%3A%22illustration%22%2C%22slug%22%3A%22illustration%22%2C%22label%22%3A%22illustration%22%7D%5D%2C%22width%22%3A3500%2C%22height%22%3A2333%2C%22aspectRatio%22%3A1.50021%7D%2C%7B%22preview%22%3A%22https%3A%2F%2Fres.cloudinary.com%2Fdd33tfitz%2Fimage%2Fupload%2Ff_auto%2Fq_auto%2Fc_limit%2Cw_1200%2F783257215.305771_ybmkpt%3F_a%3DDATAiZeAZAA0%22%2C%22grid%22%3A%22https%3A%2F%2Fres.cloudinary.com%2Fdd33tfitz%2Fimage%2Fupload%2Ff_auto%2Fq_auto%2Fc_limit%2Cw_720%2F783257215.305771_ybmkpt%3F_a%3DDATAiZeAZAA0%22%2C%22thumb%22%3A%22https%3A%2F%2Fres.cloudinary.com%2Fdd33tfitz%2Fimage%2Fupload%2Ff_auto%2Fq_auto%2Fc_fill%2Cg_auto%2Ch_360%2Cw_480%2F783257215.305771_ybmkpt%3F_a%3DDATAiZeAZAA0%22%2C%22title%22%3A%22783257215.305771%20Ybmkpt%22%2C%22description%22%3A%22%22%2C%22name%22%3A%22%22%2C%22author%22%3A%22%22%2C%22desc%22%3A%22%22%2C%22tags%22%3A%5B%7B%22code%22%3A%22bluecats%22%2C%22slug%22%3A%22bluecats%22%2C%22label%22%3A%22bluecats%22%7D%2C%7B%22code%22%3A%22illustration%22%2C%22slug%22%3A%22illustration%22%2C%22label%22%3A%22illustration%22%7D%5D%2C%22width%22%3A2333%2C%22height%22%3A3500%2C%22aspectRatio%22%3A0.66657%7D%2C%7B%22preview%22%3A%22https%3A%2F%2Fres.cloudinary.com%2Fdd33tfitz%2Fimage%2Fupload%2Ff_auto%2Fq_auto%2Fc_limit%2Cw_1200%2F783257237.130291_rluca8%3F_a%3DDATAiZeAZAA0%22%2C%22grid%22%3A%22https%3A%2F%2Fres.cloudinary.com%2Fdd33tfitz%2Fimage%2Fupload%2Ff_auto%2Fq_auto%2Fc_limit%2Cw_720%2F783257237.130291_rluca8%3F_a%3DDATAiZeAZAA0%22%2C%22thumb%22%3A%22https%3A%2F%2Fres.cloudinary.com%2Fdd33tfitz%2Fimage%2Fupload%2Ff_auto%2Fq_auto%2Fc_fill%2Cg_auto%2Ch_360%2Cw_480%2F783257237.130291_rluca8%3F_a%3DDATAiZeAZAA0%22%2C%22title%22%3A%22783257237.130291%20Rluca8%22%2C%22description%22%3A%22%22%2C%22name%22%3A%22%22%2C%22author%22%3A%22%22%2C%22desc%22%3A%22%22%2C%22tags%22%3A%5B%7B%22code%22%3A%22bluecats%22%2C%22slug%22%3A%22bluecats%22%2C%22label%22%3A%22bluecats%22%7D%2C%7B%22code%22%3A%22illustration%22%2C%22slug%22%3A%22illustration%22%2C%22label%22%3A%22illustration%22%7D%5D%2C%22width%22%3A3500%2C%22height%22%3A2333%2C%22aspectRatio%22%3A1.50021%7D%2C%7B%22preview%22%3A%22https%3A%2F%2Fres.cloudinary.com%2Fdd33tfitz%2Fimage%2Fupload%2Ff_auto%2Fq_auto%2Fc_limit%2Cw_1200%2F783257316.518413_q3cgze%3F_a%3DDATAiZeAZAA0%22%2C%22grid%22%3A%22https%3A%2F%2Fres.cloudinary.com%2Fdd33tfitz%2Fimage%2Fupload%2Ff_auto%2Fq_auto%2Fc_limit%2Cw_720%2F783257316.518413_q3cgze%3F_a%3DDATAiZeAZAA0%22%2C%22thumb%22%3A%22https%3A%2F%2Fres.cloudinary.com%2Fdd33tfitz%2Fimage%2Fupload%2Ff_auto%2Fq_auto%2Fc_fill%2Cg_auto%2Ch_360%2Cw_480%2F783257316.518413_q3cgze%3F_a%3DDATAiZeAZAA0%22%2C%22title%22%3A%22783257316.518413%20Q3cgze%22%2C%22description%22%3A%22%22%2C%22name%22%3A%22%22%2C%22author%22%3A%22%22%2C%22desc%22%3A%22%22%2C%22tags%22%3A%5B%7B%22code%22%3A%22bluecats%22%2C%22slug%22%3A%22bluecats%22%2C%22label%22%3A%22bluecats%22%7D%2C%7B%22code%22%3A%22illustration%22%2C%22slug%22%3A%22illustration%22%2C%22label%22%3A%22illustration%22%7D%5D%2C%22width%22%3A2333%2C%22height%22%3A3500%2C%22aspectRatio%22%3A0.66657%7D%2C%7B%22preview%22%3A%22https%3A%2F%2Fres.cloudinary.com%2Fdd33tfitz%2Fimage%2Fupload%2Ff_auto%2Fq_auto%2Fc_limit%2Cw_1200%2F783257376.347129_add6il%3F_a%3DDATAiZeAZAA0%22%2C%22grid%22%3A%22https%3A%2F%2Fres.cloudinary.com%2Fdd33tfitz%2Fimage%2Fupload%2Ff_auto%2Fq_auto%2Fc_limit%2Cw_720%2F783257376.347129_add6il%3F_a%3DDATAiZeAZAA0%22%2C%22thumb%22%3A%22https%3A%2F%2Fres.cloudinary.com%2Fdd33tfitz%2Fimage%2Fupload%2Ff_auto%2Fq_auto%2Fc_fill%2Cg_auto%2Ch_360%2Cw_480%2F783257376.347129_add6il%3F_a%3DDATAiZeAZAA0%22%2C%22title%22%3A%22783257376.347129%20Add6il%22%2C%22description%22%3A%22%22%2C%22name%22%3A%22%22%2C%22author%22%3A%22%22%2C%22desc%22%3A%22%22%2C%22tags%22%3A%5B%7B%22code%22%3A%22bluecats%22%2C%22slug%22%3A%22bluecats%22%2C%22label%22%3A%22bluecats%22%7D%2C%7B%22code%22%3A%22illustration%22%2C%22slug%22%3A%22illustration%22%2C%22label%22%3A%22illustration%22%7D%5D%2C%22width%22%3A2333%2C%22height%22%3A3500%2C%22aspectRatio%22%3A0.66657%7D%2C%7B%22preview%22%3A%22https%3A%2F%2Fres.cloudinary.com%2Fdd33tfitz%2Fimage%2Fupload%2Ff_auto%2Fq_auto%2Fc_limit%2Cw_1200%2F783257383.725627_icxy8i%3F_a%3DDATAiZeAZAA0%22%2C%22grid%22%3A%22https%3A%2F%2Fres.cloudinary.com%2Fdd33tfitz%2Fimage%2Fupload%2Ff_auto%2Fq_auto%2Fc_limit%2Cw_720%2F783257383.725627_icxy8i%3F_a%3DDATAiZeAZAA0%22%2C%22thumb%22%3A%22https%3A%2F%2Fres.cloudinary.com%2Fdd33tfitz%2Fimage%2Fupload%2Ff_auto%2Fq_auto%2Fc_fill%2Cg_auto%2Ch_360%2Cw_480%2F783257383.725627_icxy8i%3F_a%3DDATAiZeAZAA0%22%2C%22title%22%3A%22783257383.725627%20Icxy8i%22%2C%22description%22%3A%22%22%2C%22name%22%3A%22%22%2C%22author%22%3A%22%22%2C%22desc%22%3A%22%22%2C%22tags%22%3A%5B%7B%22code%22%3A%22bluecats%22%2C%22slug%22%3A%22bluecats%22%2C%22label%22%3A%22bluecats%22%7D%2C%7B%22code%22%3A%22illustration%22%2C%22slug%22%3A%22illustration%22%2C%22label%22%3A%22illustration%22%7D%5D%2C%22width%22%3A2333%2C%22height%22%3A3500%2C%22aspectRatio%22%3A0.66657%7D%2C%7B%22preview%22%3A%22https%3A%2F%2Fres.cloudinary.com%2Fdd33tfitz%2Fimage%2Fupload%2Ff_auto%2Fq_auto%2Fc_limit%2Cw_1200%2F783257366.307064_o9jb8h%3F_a%3DDATAiZeAZAA0%22%2C%22grid%22%3A%22https%3A%2F%2Fres.cloudinary.com%2Fdd33tfitz%2Fimage%2Fupload%2Ff_auto%2Fq_auto%2Fc_limit%2Cw_720%2F783257366.307064_o9jb8h%3F_a%3DDATAiZeAZAA0%22%2C%22thumb%22%3A%22https%3A%2F%2Fres.cloudinary.com%2Fdd33tfitz%2Fimage%2Fupload%2Ff_auto%2Fq_auto%2Fc_fill%2Cg_auto%2Ch_360%2Cw_480%2F783257366.307064_o9jb8h%3F_a%3DDATAiZeAZAA0%22%2C%22title%22%3A%22783257366.307064%20O9jb8h%22%2C%22description%22%3A%22Saint%20Petersburg%22%2C%22name%22%3A%22%22%2C%22author%22%3A%22%22%2C%22desc%22%3A%22Saint%20Petersburg%22%2C%22tags%22%3A%5B%7B%22code%22%3A%22bluecats%22%2C%22slug%22%3A%22bluecats%22%2C%22label%22%3A%22bluecats%22%7D%2C%7B%22code%22%3A%22illustration%22%2C%22slug%22%3A%22illustration%22%2C%22label%22%3A%22illustration%22%7D%5D%2C%22width%22%3A3500%2C%22height%22%3A2333%2C%22aspectRatio%22%3A1.50021%7D%5D" data-layout-mode="classic">  <div data-justified-grid data-row-height="400" data-row-gap="12" class="justified-grid"></div> <div data-lightbox class="fixed inset-0 z-50 hidden flex items-center justify-center bg-backdrop backdrop-blur-md px-5 py-8" aria-hidden="true"> <div class="relative flex h-full w-full max-w-6xl flex-col items-center justify-center"> <button type="button" data-lightbox-close class="absolute right-3 top-3 z-20 flex h-12 w-12 items-center justify-center rounded-full border border-white/30 bg-backdrop-strong text-white shadow-overlay transition hover:scale-105 hover:bg-backdrop-hover focus:outline-none focus:ring-4 focus:ring-white/70 sm:right-0 sm:top-0 sm:h-14 sm:w-14"> <span class="sr-only">Close lightbox</span> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="h-7 w-7"> <path stroke-linecap="round" stroke-linejoin="round" d="M6 6l12 12M18 6l-12 12"></path> </svg> </button> <div class="flex w-full flex-nowrap items-center justify-center gap-4 sm:gap-7"> <button type="button" data-lightbox-prev class="hidden h-12 w-12 flex-shrink-0 items-center justify-center rounded-full bg-backdrop-compact text-white shadow-surface transition hover:scale-110 hover:bg-backdrop-compact-hover focus:outline-none focus:ring-4 focus:ring-white/60 sm:flex"> <span class="sr-only">Previous image</span> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="h-6 w-6"> <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 19.5 8.25 12l7.5-7.5"></path> </svg> </button> <figure class="flex flex-1 max-w-4xl flex-col items-center gap-6 text-center" data-lightbox-swipe> <div class="flex max-h-[75vh] w-full justify-center"> <img data-lightbox-image src="" alt="" class="max-h-[75vh] w-auto max-w-full rounded-2xl object-contain shadow-overlay"> </div> <figcaption class="flex w-full flex-col items-center gap-4 text-center"> <h2 data-lightbox-name class="hidden text-2xl font-semibold tracking-tight text-lightbox-heading md:text-[1.75rem]"></h2> <p data-lightbox-author class="hidden italic text-lightbox-accent"></p> <p data-lightbox-desc class="hidden text-base text-lightbox-body"></p> <div data-lightbox-tags-wrapper class="hidden w-full text-center"> <p class="text-xs font-semibold uppercase tracking-[0.35em] text-lightbox-accent">Tags</p> <div data-lightbox-tags class="mt-2 flex flex-wrap justify-center gap-2"></div> </div> </figcaption> </figure> <button type="button" data-lightbox-next class="hidden h-12 w-12 flex-shrink-0 items-center justify-center rounded-full bg-backdrop-compact text-white shadow-surface transition hover:scale-110 hover:bg-backdrop-compact-hover focus:outline-none focus:ring-4 focus:ring-white/60 sm:flex"> <span class="sr-only">Next image</span> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="h-6 w-6"> <path stroke-linecap="round" stroke-linejoin="round" d="m8.25 4.5 7.5 7.5-7.5 7.5"></path> </svg> </button> </div> </div> </div>  </section> <script>
  /**
   * @typedef {'classic' | 'big-mobile'} LayoutModeValue
   */

  /**
   * @typedef {'single-landscape' | 'single-portrait' | 'pair-portrait'} MobileRowVariant
   */

  /**
   * @typedef {Object} LightboxTag
   * @property {string} code
   * @property {string} slug
   * @property {string} label
   */

  /**
   * @typedef {Object} LightboxItem
   * @property {string} preview
   * @property {string} grid
   * @property {string} thumb
   * @property {string} title
   * @property {string} description
   * @property {string} name
   * @property {string} author
   * @property {string} desc
   * @property {LightboxTag[]} tags
   * @property {number | null} width
   * @property {number | null} height
   * @property {number | null} aspectRatio
   */

  /**
   * @typedef {Object} MobileRowEntry
   * @property {LightboxItem} item
   * @property {number} index
   * @property {number} aspect
   */

  /**
   * @typedef {Object} MobileRow
   * @property {MobileRowVariant} variant
   * @property {MobileRowEntry[]} items
   */

  /**
   * @typedef {Object} SwipeState
   * @property {number} pointerId
   * @property {number} startX
   * @property {number} startY
   * @property {boolean} swiping
   */

  /**
   * @typedef {Object} SwipeTransformOptions
   * @property {boolean} [animate]
   */

  class JustifiedLightboxGallery {
    /**
     * @param {HTMLElement} root
     */
    constructor(root) {
      /** @type {HTMLElement} */
      this.root = root;

      const grid = root.querySelector('[data-justified-grid]');
      /** @type {HTMLElement | null} */
      this.gridEl = grid instanceof HTMLElement ? grid : null;

      const overlay = root.querySelector('[data-lightbox]');
      /** @type {HTMLElement | null} */
      this.overlay = overlay instanceof HTMLElement ? overlay : null;

      const overlayImage = this.overlay?.querySelector('[data-lightbox-image]');
      /** @type {HTMLImageElement | null} */
      this.imageEl = overlayImage instanceof HTMLImageElement ? overlayImage : null;

      const overlayName = this.overlay?.querySelector('[data-lightbox-name]');
      /** @type {HTMLElement | null} */
      this.nameEl = overlayName instanceof HTMLElement ? overlayName : null;

      const overlayDesc = this.overlay?.querySelector('[data-lightbox-desc]');
      /** @type {HTMLElement | null} */
      this.descEl = overlayDesc instanceof HTMLElement ? overlayDesc : null;

      const overlayAuthor = this.overlay?.querySelector('[data-lightbox-author]');
      /** @type {HTMLElement | null} */
      this.authorEl = overlayAuthor instanceof HTMLElement ? overlayAuthor : null;

      const overlayTagsWrapper = this.overlay?.querySelector('[data-lightbox-tags-wrapper]');
      /** @type {HTMLElement | null} */
      this.tagsWrapper = overlayTagsWrapper instanceof HTMLElement ? overlayTagsWrapper : null;

      const overlayTags = this.overlay?.querySelector('[data-lightbox-tags]');
      /** @type {HTMLElement | null} */
      this.tagsContainer = overlayTags instanceof HTMLElement ? overlayTags : null;

      const closeButton = this.overlay?.querySelector('[data-lightbox-close]');
      /** @type {HTMLButtonElement | null} */
      this.closeBtn = closeButton instanceof HTMLButtonElement ? closeButton : null;

      const nextButton = this.overlay?.querySelector('[data-lightbox-next]');
      /** @type {HTMLButtonElement | null} */
      this.nextBtn = nextButton instanceof HTMLButtonElement ? nextButton : null;

      const prevButton = this.overlay?.querySelector('[data-lightbox-prev]');
      /** @type {HTMLButtonElement | null} */
      this.prevBtn = prevButton instanceof HTMLButtonElement ? prevButton : null;

      /** @type {LightboxItem[]} */
      this.items = this.parseItems(root.dataset.lightboxItems);
      this.base = root.dataset.lightboxBase || '/';

      const modeFromDataset = root.dataset.layoutMode;
      /** @type {LayoutModeValue} */
      this.layoutMode = modeFromDataset === 'big-mobile' ? 'big-mobile' : 'classic';

      this.baseTargetHeight = Number(this.gridEl?.dataset.rowHeight) || 400;
      const rawGap = Number(this.gridEl?.dataset.rowGap);
      this.baseGap = Number.isFinite(rawGap) && rawGap >= 0 ? rawGap : 12;

      const overlaySwipe = this.overlay?.querySelector('[data-lightbox-swipe]');
      /** @type {HTMLElement | null} */
      this.swipeArea = overlaySwipe instanceof HTMLElement ? overlaySwipe : null;

      /** @type {SwipeState | null} */
      this.swipeState = null;
      this.swipeThreshold = 60;
      this.maxVerticalDelta = 80;
      /** @type {HTMLButtonElement[]} */
      this.triggers = [];
      this.activeIndex = 0;
      this.previousOverflow = '';
      /** @type {ResizeObserver | undefined} */
      this.resizeObserver = undefined;
      /** @type {MutationObserver | undefined} */
      this.attributeObserver = undefined;

      this.handleKeyDown = this.handleKeyDown.bind(this);
      this.handleOverlayClick = this.handleOverlayClick.bind(this);
      this.handleCloseClick = this.handleCloseClick.bind(this);
      this.handleNextClick = this.handleNextClick.bind(this);
      this.handlePrevClick = this.handlePrevClick.bind(this);
      this.handlePointerDown = this.handlePointerDown.bind(this);
      this.handlePointerMove = this.handlePointerMove.bind(this);
      this.handlePointerUp = this.handlePointerUp.bind(this);
      this.handlePointerCancel = this.handlePointerCancel.bind(this);

      if (!this.gridEl || this.items.length === 0) {
        return;
      }

      this.setupOverlayControls();
      this.renderGrid();

      if (typeof ResizeObserver !== 'undefined') {
        this.resizeObserver = new ResizeObserver(() => {
          this.renderGrid();
        });
        this.resizeObserver.observe(this.root);
      }

      if (typeof MutationObserver !== 'undefined') {
        this.attributeObserver = new MutationObserver(mutations => {
          for (const mutation of mutations) {
            if (mutation.type === 'attributes' && mutation.attributeName === 'data-layout-mode') {
              const nextMode = this.root.dataset.layoutMode === 'big-mobile' ? 'big-mobile' : 'classic';
              if (nextMode !== this.layoutMode) {
                this.layoutMode = nextMode;
                this.renderGrid();
              }
            }
          }
        });
        this.attributeObserver.observe(this.root, {
          attributes: true,
          attributeFilter: ['data-layout-mode']
        });
      }
    }

    /**
     * @param {string | undefined} raw
     * @returns {LightboxItem[]}
     */
    parseItems(raw) {
      if (!raw) return [];
      try {
        const parsed = JSON.parse(decodeURIComponent(raw));
        return Array.isArray(parsed) ? parsed : [];
      } catch (error) {
        console.warn('Failed to parse justified gallery items', error);
        return [];
      }
    }

    /**
     * @param {LightboxItem} item
     * @returns {number}
     */
    getAspect(item) {
      const direct = item.aspectRatio;
      if (typeof direct === 'number' && Number.isFinite(direct) && direct > 0) {
        return direct;
      }
      const { width, height } = item;
      if (width && height && height > 0) {
        return width / height;
      }
      return 1.5;
    }

    /**
     * @param {number} containerWidth
     * @returns {number}
     */
    getResponsiveTargetHeight(containerWidth) {
      const viewportWidth = typeof window !== 'undefined' ? window.innerWidth : containerWidth;
      const baseTarget = this.baseTargetHeight || 400;
      if (!Number.isFinite(baseTarget) || baseTarget <= 0) {
        return 400;
      }

      const smallLimit = Math.max(160, Math.min(baseTarget, 220));
      const mediumLimit = Math.max(200, Math.min(baseTarget, 280));
      const largeLimit = Math.max(240, Math.min(baseTarget, 340));

      if (viewportWidth <= 480 || containerWidth <= 480) {
        return smallLimit;
      }
      if (viewportWidth <= 768) {
        return mediumLimit;
      }
      if (viewportWidth <= 1024) {
        return largeLimit;
      }
      return baseTarget;
    }

    /**
     * @param {number} containerWidth
     * @returns {{ min: number, max: number }}
     */
    getResponsiveRowScale(containerWidth) {
      const viewportWidth = typeof window !== 'undefined' ? window.innerWidth : containerWidth;
      if (viewportWidth <= 480 || containerWidth <= 480) {
        return { min: 0.55, max: 1.25 };
      }
      if (viewportWidth <= 768) {
        return { min: 0.6, max: 1.3 };
      }
      return { min: 0.7, max: 1.35 };
    }

    /**
     * @param {number} containerWidth
     * @returns {number}
     */
    getResponsiveGap(containerWidth) {
      const viewportWidth = typeof window !== 'undefined' ? window.innerWidth : containerWidth;
      const baseGap = Number.isFinite(this.baseGap) ? this.baseGap : 12;
      if (viewportWidth <= 480 || containerWidth <= 480) {
        return Math.max(6, Math.min(baseGap, 8));
      }
      if (viewportWidth <= 768) {
        return Math.max(7, Math.min(baseGap, 10));
      }
      return baseGap;
    }

    renderGrid() {
      const grid = this.gridEl;
      if (!grid) return;

      const containerWidth = grid.clientWidth || grid.offsetWidth;
      if (!containerWidth) {
        requestAnimationFrame(() => this.renderGrid());
        return;
      }

      const gap = this.getResponsiveGap(containerWidth);
      grid.style.setProperty('--row-gap', `${gap}px`);
      grid.innerHTML = '';
      this.triggers = [];

      const items = this.items;
      const enableBigLayout = this.layoutMode === 'big-mobile';
      const isMobileLayout = enableBigLayout && containerWidth <= 640;
      grid.classList.toggle('is-mobile-big', isMobileLayout);

      if (isMobileLayout) {
        const mobileRows = this.buildMobileRows(items);
        mobileRows.forEach(row => {
          const rowEl = document.createElement('div');
          const baseClass = 'big-layout-row';
          const variantClass = `big-layout-row--${row.variant}`;
          const sizeClass = row.variant === 'pair-portrait' ? 'big-layout-row--pair' : 'big-layout-row--single';
          rowEl.className = `${baseClass} ${sizeClass} ${variantClass}`;

          row.items.forEach(entry => {
            const trigger = this.createTrigger(entry.item, entry.index);
            const orientation = entry.aspect >= 1 ? 'landscape' : 'portrait';
            trigger.classList.add('justified-item--big', `justified-item--${orientation}`);
            trigger.style.height = 'auto';
            trigger.style.width = '100%';
            trigger.style.flex = '0 0 auto';
            trigger.style.aspectRatio = String(entry.aspect);
            trigger.style.setProperty('--big-aspect', String(entry.aspect));
            rowEl.appendChild(trigger);
          });

          grid.appendChild(rowEl);
        });

        this.refreshNavVisibility();
        return;
      }

      const baseTargetHeight = this.getResponsiveTargetHeight(containerWidth);
      const { min: minScale, max: maxScale } = this.getResponsiveRowScale(containerWidth);

      /** @type {MobileRowEntry[]} */
      let currentRow = [];
      let aspectSum = 0;

      const flushRow = isLast => {
        if (currentRow.length === 0) return;

        const availableWidth = containerWidth - gap * (currentRow.length - 1);
        const idealHeight = availableWidth / aspectSum;
        const clampedHeight = Math.max(
          baseTargetHeight * minScale,
          Math.min(baseTargetHeight * maxScale, idealHeight)
        );
        const rowHeight = isLast ? baseTargetHeight : clampedHeight;

        const rowEl = document.createElement('div');
        rowEl.className = 'justified-row';
        rowEl.style.height = `${rowHeight}px`;
        if (isLast) {
          rowEl.classList.add('justified-row--last');
        }

        currentRow.forEach(entry => {
          const trigger = this.createTrigger(entry.item, entry.index);
          if (isLast) {
            trigger.style.flex = '0 0 auto';
            trigger.style.width = `${rowHeight * entry.aspect}px`;
            trigger.style.height = `${rowHeight}px`;
          } else {
            trigger.style.flex = `${entry.aspect} 1 0`;
            trigger.style.height = `${rowHeight}px`;
          }
          rowEl.appendChild(trigger);
        });

        grid.appendChild(rowEl);
        currentRow = [];
        aspectSum = 0;
      };

      items.forEach((item, index) => {
        const aspect = this.getAspect(item);
        currentRow.push({ item, aspect, index });
        aspectSum += aspect;
        const projectedWidth = aspectSum * baseTargetHeight + gap * (currentRow.length - 1);
        if (projectedWidth >= containerWidth) {
          flushRow(false);
        }
      });

      if (currentRow.length) {
        flushRow(true);
      }

      this.refreshNavVisibility();
    }

    /**
     * @param {number} value
     * @param {number} [fallback=1]
     * @returns {number}
     */
    clampAspect(value, fallback = 1) {
      if (!Number.isFinite(value) || value <= 0) {
        return fallback;
      }
      const rounded = Number(value.toFixed(5));
      return Math.min(2.6, Math.max(0.4, rounded));
    }

    /**
     * @param {LightboxItem[]} items
     * @returns {MobileRow[]}
     */
    buildMobileRows(items) {
      /** @type {MobileRow[]} */
      const rows = [];
      if (!Array.isArray(items) || items.length === 0) {
        return rows;
      }

      let index = 0;
      const total = items.length;

      while (index < total) {
        const currentItem = items[index];
        const currentAspectRaw = this.getAspect(currentItem);
        const currentAspect = this.clampAspect(currentAspectRaw, 1.25);
        const isLandscape = currentAspectRaw >= 1;

        if (isLandscape) {
          rows.push({
            variant: 'single-landscape',
            items: [{ item: currentItem, index, aspect: currentAspect }]
          });
          index += 1;
          continue;
        }

        /** @type {MobileRowEntry[]} */
        const portraitGroup = [];
        while (index < total) {
          const portraitItem = items[index];
          const portraitAspectRaw = this.getAspect(portraitItem);
          if (portraitAspectRaw >= 1) {
            break;
          }
          portraitGroup.push({
            item: portraitItem,
            index,
            aspect: this.clampAspect(portraitAspectRaw, 0.8)
          });
          index += 1;
        }

        let pointer = 0;
        while (pointer < portraitGroup.length) {
          const remaining = portraitGroup.length - pointer;
          if (remaining >= 2) {
            rows.push({
              variant: 'pair-portrait',
              items: [portraitGroup[pointer], portraitGroup[pointer + 1]]
            });
            pointer += 2;
          } else {
            rows.push({
              variant: 'single-portrait',
              items: [portraitGroup[pointer]]
            });
            pointer += 1;
          }
        }
      }

      return rows;
    }

    /**
     * @param {LightboxItem} item
     * @param {number} index
     * @returns {HTMLButtonElement}
     */
    createTrigger(item, index) {
      const button = document.createElement('button');
      button.type = 'button';
      button.dataset.lightboxTrigger = '';
      button.dataset.index = String(index);
      button.className = 'justified-item';
      const labelSource = item.name || item.title;
      const ariaLabel = labelSource ? `Open ${labelSource} in lightbox` : 'Open image in lightbox';
      button.setAttribute('aria-label', ariaLabel);

      const img = document.createElement('img');
      img.src = item.grid || item.preview || item.thumb;
      img.alt = item.name || item.title || 'Gallery image';
      img.loading = 'lazy';
      img.decoding = 'async';

      /**
       * @param {HTMLImageElement} image
       * @param {string} galleryBase
       */
      const attachFallback = (image, galleryBase) => {
        const baseRaw = galleryBase || '/';
        const baseWithSlash = baseRaw.endsWith('/') ? baseRaw : `${baseRaw}/`;
        const fallback = `${baseWithSlash}assets/img/unavailable.svg`;
        /**
         * @param {Event} event
         */
        const handleError = event => {
          const target = event.currentTarget;
          if (!(target instanceof HTMLImageElement) || target.dataset.fallbackApplied) return;
          target.dataset.fallbackApplied = '1';
          target.removeEventListener('error', handleError);
          target.src = fallback;
          target.alt = 'Not available';
          target.classList.add('is-fallback');
        };
        image.addEventListener('error', handleError);
      };

      attachFallback(img, this.base);
      button.appendChild(img);

      if (item.name || item.desc) {
        const overlay = document.createElement('div');
        overlay.className = 'justified-item__overlay';
        if (item.name) {
          const title = document.createElement('strong');
          title.className = 'justified-item__title';
          title.textContent = item.name;
          overlay.appendChild(title);
        }
        if (item.desc) {
          const description = document.createElement('p');
          description.className = 'justified-item__desc';
          description.textContent = item.desc;
          overlay.appendChild(description);
        }
        button.appendChild(overlay);
      }

      button.addEventListener('click', event => {
        event.preventDefault();
        this.openLightbox(index);
      });

      this.triggers[index] = button;
      return button;
    }

    setupOverlayControls() {
      if (!this.overlay) return;

      this.overlay.addEventListener('click', this.handleOverlayClick);
      this.closeBtn?.addEventListener('click', this.handleCloseClick);
      this.nextBtn?.addEventListener('click', this.handleNextClick);
      this.prevBtn?.addEventListener('click', this.handlePrevClick);
      if (this.swipeArea) {
        this.swipeArea.addEventListener('pointerdown', this.handlePointerDown);
        this.swipeArea.addEventListener('pointermove', this.handlePointerMove);
        this.swipeArea.addEventListener('pointerup', this.handlePointerUp);
        this.swipeArea.addEventListener('pointercancel', this.handlePointerCancel);
        this.swipeArea.addEventListener('pointerleave', this.handlePointerCancel);
      }
    }

    /**
     * @param {MouseEvent} event
     */
    handleOverlayClick(event) {
      if (event.target === this.overlay) {
        this.closeLightbox();
      }
    }

    /**
     * @param {MouseEvent} event
     */
    handleCloseClick(event) {
      event.preventDefault();
      this.closeLightbox();
    }

    /**
     * @param {MouseEvent} event
     */
    handleNextClick(event) {
      event.preventDefault();
      this.step(1);
    }

    /**
     * @param {MouseEvent} event
     */
    handlePrevClick(event) {
      event.preventDefault();
      this.step(-1);
    }

    /**
     * @param {PointerEvent} event
     */
    handlePointerDown(event) {
      if (!event.isPrimary || (event.pointerType === 'mouse' && event.button !== 0)) {
        return;
      }
      if (!this.swipeArea || !this.imageEl || this.overlay?.classList.contains('hidden')) {
        return;
      }
      this.swipeState = {
        pointerId: event.pointerId,
        startX: event.clientX,
        startY: event.clientY,
        swiping: false
      };
      this.swipeArea.style.cursor = 'grabbing';
      this.swipeArea.classList.add('is-touching');
      event.stopPropagation();
    }

    /**
     * @param {PointerEvent} event
     */
    handlePointerMove(event) {
      if (!this.swipeState || event.pointerId !== this.swipeState.pointerId) {
        return;
      }
      const deltaX = event.clientX - this.swipeState.startX;
      const deltaY = event.clientY - this.swipeState.startY;

      if (!this.swipeState.swiping) {
        if (Math.abs(deltaY) > this.maxVerticalDelta && Math.abs(deltaY) > Math.abs(deltaX)) {
          this.resetSwipeState();
          return;
        }
        if (Math.abs(deltaX) > 12) {
          this.swipeState.swiping = true;
        }
      }

      if (this.swipeState.swiping) {
        event.preventDefault();
        this.applySwipeTransform(deltaX);
      }
      event.stopPropagation();
    }

    /**
     * @param {PointerEvent} event
     */
    handlePointerUp(event) {
      if (!this.swipeState || event.pointerId !== this.swipeState.pointerId) {
        return;
      }
      const deltaX = event.clientX - this.swipeState.startX;
      if (this.swipeState.swiping && Math.abs(deltaX) >= this.swipeThreshold) {
        this.step(deltaX > 0 ? -1 : 1);
      }
      this.resetSwipeState();
      event.stopPropagation();
    }

    /**
     * @param {PointerEvent} event
     */
    handlePointerCancel(event) {
      if (!this.swipeState || event.pointerId !== this.swipeState.pointerId) {
        return;
      }
      this.resetSwipeState();
      event.stopPropagation();
    }

    /**
     * @param {number} deltaX
     * @param {SwipeTransformOptions} [options]
     */
    applySwipeTransform(deltaX, options = {}) {
      if (!this.imageEl) return;
      const { animate = false } = options;
      if (animate) {
        this.imageEl.style.transition = 'transform 0.18s ease-out';
      } else {
        this.imageEl.style.transition = 'transform 0s';
      }

      if (deltaX === 0) {
        this.imageEl.style.transform = 'translateX(0)';
      } else {
        const limited = Math.max(-160, Math.min(160, deltaX));
        this.imageEl.style.transform = `translateX(${limited}px)`;
      }

      if (animate) {
        window.setTimeout(() => {
          if (this.imageEl) {
            this.imageEl.style.transition = '';
          }
        }, 200);
      } else if (deltaX === 0) {
        this.imageEl.style.transition = '';
      }
    }

    resetSwipeState() {
      const shouldAnimate = Boolean(this.swipeState?.swiping);
      if (this.swipeArea) {
        this.swipeArea.style.cursor = '';
        this.swipeArea.classList.remove('is-touching');
      }
      this.applySwipeTransform(0, { animate: shouldAnimate });
      this.swipeState = null;
    }

    /**
     * @param {KeyboardEvent} event
     */
    handleKeyDown(event) {
      if (this.overlay?.classList.contains('hidden')) return;
      if (event.key === 'Escape') {
        event.preventDefault();
        this.closeLightbox();
      } else if (event.key === 'ArrowRight') {
        event.preventDefault();
        this.step(1);
      } else if (event.key === 'ArrowLeft') {
        event.preventDefault();
        this.step(-1);
      }
    }

    refreshNavVisibility() {
      if (!this.nextBtn || !this.prevBtn) return;
      const shouldHide = this.items.length < 2;
      const toggleNav = button => {
        if (!button) return;
        if (shouldHide) {
          button.classList.add('sm:hidden');
          button.setAttribute('aria-hidden', 'true');
          button.setAttribute('tabindex', '-1');
        } else {
          button.classList.remove('sm:hidden');
          button.removeAttribute('aria-hidden');
          button.removeAttribute('tabindex');
        }
      };
      toggleNav(this.nextBtn);
      toggleNav(this.prevBtn);
    }

    /**
     * @param {LightboxTag[] | undefined} tags
     */
    renderTags(tags) {
      if (!this.tagsContainer || !this.tagsWrapper) return;
      const container = this.tagsContainer;
      const wrapper = this.tagsWrapper;
      container.innerHTML = '';
      const list = Array.isArray(tags) ? tags.filter(tag => tag && tag.slug) : [];
      if (list.length === 0) {
        wrapper.classList.add('hidden');
        return;
      }
      wrapper.classList.remove('hidden');
      const baseRaw = this.base || '/';
      const baseWithSlash = baseRaw.endsWith('/') ? baseRaw : `${baseRaw}/`;
      list.forEach(tag => {
        const anchor = document.createElement('a');
        anchor.href = `${baseWithSlash}tag/${tag.slug}`;
        anchor.textContent = `#${tag.label || tag.code || tag.slug}`;
        anchor.className = 'lightbox-tag';
        container.appendChild(anchor);
      });
    }

    updateOverlayContent() {
      const item = this.items[this.activeIndex];
      if (!item) return;

      const source = item.preview || item.grid || item.thumb;
      if (this.imageEl) {
        if (source) {
          if (this.imageEl.src !== source) {
            this.imageEl.src = source;
          }
        } else {
          this.imageEl.removeAttribute('src');
        }
        this.imageEl.alt = item.name || item.title || 'Gallery image';
        const baseRaw = this.base || '/';
        const baseWithSlash = baseRaw.endsWith('/') ? baseRaw : `${baseRaw}/`;
        const fallback = `${baseWithSlash}assets/img/unavailable.svg`;
        if (this.imageEl.dataset.fallbackHandlerAttached !== '1') {
          this.imageEl.dataset.fallbackHandlerAttached = '1';
          const handleOverlayError = event => {
            const target = event.currentTarget;
            if (!(target instanceof HTMLImageElement) || target.dataset.fallbackApplied) return;
            target.dataset.fallbackApplied = '1';
            target.removeEventListener('error', handleOverlayError);
            target.src = fallback;
            target.alt = 'Not available';
            target.classList.add('is-fallback');
          };
          this.imageEl.addEventListener('error', handleOverlayError);
        }
        this.imageEl.style.transform = 'translateX(0)';
        this.imageEl.style.transition = '';
      }

      if (this.nameEl) {
        if (item.name) {
          this.nameEl.textContent = item.name;
          this.nameEl.classList.remove('hidden');
        } else {
          this.nameEl.textContent = '';
          this.nameEl.classList.add('hidden');
        }
      }

      if (this.authorEl) {
        if (item.author) {
          this.authorEl.textContent = `by ${item.author}`;
          this.authorEl.classList.remove('hidden');
        } else {
          this.authorEl.textContent = '';
          this.authorEl.classList.add('hidden');
        }
      }

      if (this.descEl) {
        if (item.desc) {
          this.descEl.textContent = item.desc;
          this.descEl.classList.remove('hidden');
        } else {
          this.descEl.textContent = '';
          this.descEl.classList.add('hidden');
        }
      }

      this.renderTags(item.tags);
    }

    /**
     * @param {number} index
     */
    openLightbox(index) {
      if (!this.overlay || this.items.length === 0) return;
      this.activeIndex = index;
      this.updateOverlayContent();
      this.overlay.classList.remove('hidden');
      this.overlay.setAttribute('aria-hidden', 'false');
      this.previousOverflow = document.body.style.overflow;
      document.body.style.overflow = 'hidden';
      window.addEventListener('keydown', this.handleKeyDown);
      requestAnimationFrame(() => {
        this.closeBtn?.focus();
      });
    }

    closeLightbox() {
      if (!this.overlay || this.overlay.classList.contains('hidden')) return;
      this.overlay.classList.add('hidden');
      this.overlay.setAttribute('aria-hidden', 'true');
      document.body.style.overflow = this.previousOverflow;
      window.removeEventListener('keydown', this.handleKeyDown);
      const trigger = this.triggers[this.activeIndex];
      if (trigger) {
        trigger.focus({ preventScroll: true });
      }
    }

    /**
     * @param {number} direction
     */
    step(direction) {
      if (this.items.length < 2) return;
      this.activeIndex = (this.activeIndex + direction + this.items.length) % this.items.length;
      this.updateOverlayContent();
    }
  }

  /** @type {HTMLElement[]} */
  const lightboxRoots = Array.from(document.querySelectorAll('[data-lightbox-root]'));
  lightboxRoots.forEach(root => {
    if (!(root instanceof HTMLElement)) return;
    const hasItems = Boolean(root.dataset.lightboxItems && root.dataset.lightboxItems.length > 0);
    if (hasItems) {
      new JustifiedLightboxGallery(root);
    }
  });
</script>  <section class="pb-12"> <h3 class="px-6 text-sm font-semibold uppercase tracking-[0.3em] text-[var(--text-muted)] md:px-9">
Browse other tags
</h3> <ul class="cluster-shell flex flex-wrap gap-2" data-spacing="stack"> <li> <a class="chip" data-tone="muted" href="/cardgallery/tag/birds"> Birds </a> </li><li> <a class="chip" data-tone="accent" data-state="active" href="/cardgallery/tag/bluecats"> bluecats </a> </li><li> <a class="chip" data-tone="muted" href="/cardgallery/tag/boomerang"> Boomerang </a> </li><li> <a class="chip" data-tone="muted" href="/cardgallery/tag/dutch-style"> Dutch-style </a> </li><li> <a class="chip" data-tone="muted" href="/cardgallery/tag/free"> Free </a> </li><li> <a class="chip" data-tone="muted" href="/cardgallery/tag/illustration"> illustration </a> </li><li> <a class="chip" data-tone="muted" href="/cardgallery/tag/meetup"> Meetup </a> </li><li> <a class="chip" data-tone="muted" href="/cardgallery/tag/museum"> Museum </a> </li> </ul> </section> </main> </div>  </div> <footer class="border-t border-footer-border py-6 text-sm text-footer-text"> <div class="mx-auto flex max-w-5xl flex-col items-center px-6 text-center"> <p>
✉️ <a href="https://www.postcrossing.com/user/amarantha" target="_blank" rel="noopener noreferrer">Amarantha on Postcrossing</a>
· Spotted a misprint or glitch? <a class="underline" href="mailto:amarrantha@yandex.com?subject=Gallery%20bug%20report">Send me a note!</a> </p> <p class="mt-3">© 2025 Amarantha 📮 from my mail shelves with care 💌</p> </div> </footer> </div> <script data-goatcounter="https://amarranta.goatcounter.com/count" async src="//gc.zgo.at/count.js"></script> </body> </html>