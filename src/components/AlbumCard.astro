---
interface AlbumItemMeta {
  thumbUrl?: string;
  title?: string;
}

interface AlbumData {
  slug: string;
  name: string;
  items: AlbumItemMeta[];
}

const { album } = Astro.props as { album: AlbumData };
const previewItems = album.items.slice(0, 6);
---
<a href={`${import.meta.env.BASE_URL}album/${album.slug}`} class="album-card group">
  <div class="album-card__grid">
    {Array.from({ length: 6 }).map((_, index) => {
      const item = previewItems[index];
      return (
        <div class="album-card__tile" data-state={!item ? 'empty' : undefined}>
          {item && (
            <img
              src={item.thumbUrl}
              alt={item.title}
              loading="lazy"
              decoding="async"
              class="album-card__thumb"
            />
          )}
        </div>
      );
    })}
  </div>
  <div class="album-card__meta">
    <p class="album-card__title" data-i18n={`albums.${album.name}`}>{album.name}</p>
    <p class="album-card__count" data-count={album.items.length} data-count-key="album.itemsCount">{album.items.length} {album.items.length === 1 ? 'postcard' : 'postcards'}</p>
  </div>
</a>
